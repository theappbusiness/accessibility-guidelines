This document is in beta. Help us by [reporting issues via Github](https://github.com/theappbusiness/accessibility-guidelines) or [email](mailto:jeanfrancois@theappbusiness.com)

[Back to the overview page](./../index.html)

# Status messages

On this page:
* [Summary](#summary)
* [Requirements](#requirements)
* [Guidance for Design](#guidance-for-design)
* [Guidance for iOS](#guidance-for-ios)
* [Guidance for Android](#guidance-for-android)
* [Guidance for Flutter](#guidance-for-flutter)
* [Guidance for Web](#guidance-for-web)
* [More info](#more-info)

---

## Summary

**Make sure status messages are identified in code, so that assistive technologies can convey them to users.**

## Requirements

There are different situations where a status message need to be shown in a way that screen readers understand. For example:
* error messages that appear while users fill in a form;
* an alert message that is displayed when a session is about to expire;
* some content that is changed/removed/added as a result of a user's action.

These messages need to be conveyed to users without disturbing the user's position on a page.

Screen reader announcements (using ARIA Live regions for the Web, for example) should be used to inform screen reader users of these events without disrupting their position on the page.

### Why?

* A sighted person can quickly see status messages on a page, and them go back to what they were doing or reading. Moving focus to a message can be disruptive for screen reader users, users of speech recognition software and keyboard only users.
  * Screen reader users navigate page with what is called a 'screen reader cursor'. They can move that screen reader cursor using their keyboard, braille display or gestures on a touch screen.
  * Status messages (like system error messages or form validation error messages) need to be communicated to users without moving their 'scren reader cursor' on the page. Otherwise users would need to figure out where they are on the page afterwards, and move back to where they wanted to be.

* If focus is always moved to the message users with cognitive impairments may also be confused by unpredictable focus changes. 

### Official wording in the Web Content Accessibility Guidelines

> [**4.1.3 Status Messages:**](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html) In content implemented using markup languages, [status messages](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html#dfn-status-message) can be [programmatically determined](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html#dfn-programmatically-determined) through [role](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html#dfn-role) or properties such that they can be presented to the user by [assistive technologies](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html#dfn-assistive-technology) without receiving focus. (Level AA)

See the [W3C's detailed explanation of this guideline](https://www.w3.org/WAI/WCAG21/Understanding/status-messages.html) with techniques and examples.

---

## Guidance for Design

This section needs more content. [Contribute via Github](https://github.com/theappbusiness/accessibility-guidelines/) or [email](mailto:jeanfrancois@theappbusiness.com).

---

## Guidance for iOS

This section needs more content. [Contribute via Github](https://github.com/theappbusiness/accessibility-guidelines/) or [email](mailto:kane.cheshire@theappbusiness.com).

---

## Guidance for Android

You can use a **live region** in order to send a new `AccessibilityEvent` to the current enabled Accessibility Service on view updates. This means that any service like TalkBack will pay attention to any changes in that **View** and will automatically announce them.

To do so, you can easily mark any View as a live region in your XML file by adding the `accessibilityLiveRegion` attribute:

```xml
<View
  ...
  android:accessibilityLiveRegion="polite"
  .../>
```

Options for this attribute are the following:
- `none`: Accessibility services should not announce changes to this view.
- `polite`: Accessibility services should announce changes to this view.
- `assertive`: Accessibility services should interrupt ongoing speech to immediately announce changes to this view.

> Carefully consider when to use live regions, as announcements for frequently changing views can be disruptive and annoying. Live regions can easily be overused, especially when you're just starting out with accessibility. ***Live regions are the exception, not the rule.***

---

## Guidance for Flutter

Widgets with built in error messages such as `TextField()` in a `Form()` widget have their errors read out automatically when the `validator: (value) {}` returns a error string.

The same can be said for the `AlertDialog` widget.

* If you want the screen reader to read something out programmatically, for example on a state change or a widget coming into view you can use:
```dart 
SemanticsService.announce( String, TextDirection.ltr); // the text direction should be based on some sort of localization setting.
```

---

## Guidance for Web

The following are different situations you will need to cover:

### When a status message tells the user something is successful

When a status message tells the user something is successful or is the results of an action. This can also be used for a state change when part of a page updates:

You can use these following techniques:

[Use the ARIA role="status" to present status messages](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA22) in combination with the technique [Providing success feedback when data is submitted successfully](https://www.w3.org/WAI/WCAG21/Techniques/general/G199).

### If a status message conveys a suggestion, or a warning or error:

<strong>NOTE:</strong> There may be times when the best user experience is to move focus to a message, such as an error, as a part of form validation etc. See the [GDS' Error Summary component and guidance](https://design-system.service.gov.uk/components/error-summary/) for an example.

Use the following techniques:

[Use ARIA role="alert" or Live Regions to Identify Errors](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA19) in combination with any of the following:

* [Providing text descriptions to identify required fields that were not completed](https://www.w3.org/WAI/WCAG21/Techniques/general/G83)
* [Providing a text description when the user provides information that is not in the list of allowed values](https://www.w3.org/WAI/WCAG21/Techniques/general/G84)
* [Providing a text description when user input falls outside the required format or values](https://www.w3.org/WAI/WCAG21/Techniques/general/G85)
* [Creating a mechanism that allows users to jump to errors](https://www.w3.org/WAI/WCAG21/Techniques/general/G139)
* [Providing suggested correction text](https://www.w3.org/WAI/WCAG21/Techniques/general/G177)
* [Providing spell checking and suggestions for text input](https://www.w3.org/WAI/WCAG21/Techniques/general/G194)

### If a status message conveys information on the progress of a process:

The ARIA <code>role="progressbar"</code> can be used but may not be enough on its own (depending on support by browsers and assistive technologies). For some examples of <code>progressbar</code> role see:

* [Mozilla - Using the progressbar role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_progressbar_role)
* [ARIA Progress bar example - LevelAccess Labs](https://labs.levelaccess.com/index.php/ARIA_Progressbar)

You can use the following techniques:

* [Using role=log to identify sequential information updates](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA23)
* [Using role=status to present status messages](https://www.w3.org/WAI/WCAG21/Techniques/aria/ARIA22) in combination with [Providing help by an assistant in the Web page](https://www.w3.org/WAI/WCAG21/Techniques/general/G193)

### Common mistakes

* Status messages are not to be shown in a way that the screen reader understands and without receive [keyboard focus](./definitions.md#keyboard-focus).
* Using <code>role="alert"</code> or <code>aria-live="assertive"</code> on content which is not important.
* On a page with ARIA live regions - if regions are hidden or not needed - always make sure to switch their active and inactive states accordingly.

### More guidance for Web

* [ARIA live regions article](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions) on MDN

---

## More info

### Sources

* [W3C Web Content Accessibility Guidelines 2.1](https://www.w3.org/TR/WCAG21/)
* [Government Digital Service WCAG 2.1 Primer](https://alphagov.github.io/wcag-primer/)
* [Barclays' Accessibility Design Standards](https://home.barclays/who-we-are/our-suppliers/our-requirements-of-external-suppliers/)

### Contribute

This document is in beta. Help us by [reporting issues via Github](https://github.com/theappbusiness/accessibility-guidelines) or [email](mailto:jeanfrancois@theappbusiness.com)

